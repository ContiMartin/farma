{% extends "base/base-abm.html" %}
{% load staticfiles %}
{% load staticfiles bootstrap3 %}

{% block more-stylesheets %}
     <link rel="stylesheet" href="{%  static 'css/jquery-ui.custom.min.css'  %}">
{% endblock %}

{% block title %}
    Recepcion de Pedidos de Laboratorio
{% endblock %}

{% block more-crumbs %}
    <li class="active">Recepcion de pedidos de laboratorio</li>
{% endblock %}

{% block panel-title-ABM %}
    <h3 class="panel-title">Pedidos a Laboratorio</h3>
{% endblock %}

{% block btn-alta %}
{% endblock %}

{% block btn-modificar %}
{% endblock %}

{% block btn-baja %}
{% endblock %}

{% block more-buttons %}
   <a class="btn btn-warning hidden ocultable" id="registrar"><span class="glyphicon glyphicon-ok-circle"></span>  Registrar recepcion</a>
{% endblock %}

{% block filtro %}
    <label>Buscar:</label>
    <input class="filtro" id="laboratorio" name="laboratorio" value="{{filtros.laboratorio}}" placeholder="Laboratorio">
    <input class="datepicker"  id="desde" name="desde" value="{{filtros.desde}}" placeholder="Desde">
    <input class="datepicker" id="hasta" name="hasta" value="{{filtros.hasta}}" placeholder="Hasta">
    <button class="btn btn-danger btn-sm" type="submit" value="Filtrar" id="btn-filtrar">Filtrar</button>
    <button class="btn btn-primary btn-sm" type="button"  id="btn-limpiar">Limpiar</button>
{% endblock %}

{% block grid %}
    <table id="example" class="table table-hover table-bordered" cellspacing="0" width="100%">
        <thead>
            <tr class="info">
                <th>Fecha</th>
                <th>Laboratorio</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for recibido in recibidos %}
                <tr class="clickeable" data-id="{{ recibido.nroPedido }}">          
                    <td>{{recibido.fecha}}</td>
                    <td>{{recibido.laboratorio.razonSocial}}</td>
                    <td>{{recibido.estado}}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block more-scripts %}
    <script src="{% static 'js/datepicker.js' %}"></script>
    <script>
        $(document).ready(function(){
            $("#registrar").on("click", function(e){
                var id = get_selected_row();
                if(id){
                    var url = "/recepcionPedidoAlaboratorio/" + id +"/cargarPedido/";
                    $(this).attr("href", url);
                }
                e.stopPropagation();
            });
        });
    </script>
{% endblock %}