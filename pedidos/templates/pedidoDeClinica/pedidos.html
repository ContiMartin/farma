{% extends "base-ABM.html"%}

{% load staticfiles %}

{% block title %}Pedidos de Clinica{% endblock %}

    {% block more-stylesheets %}
        <link rel="stylesheet" href="{%  static 'css/custom-theme/jquery-ui-1.10.3.custom.css'  %}">
    {% endblock %}


{% block panel-title-ABM %}Pedidos de Clinica{% endblock %}

{% block url-add %}{% url 'pedido_de_clinica_add' %}{% endblock %}

<!-- No necesito boton de baja -->
{% block btn-baja %}{% endblock %}

<!-- No necesito boton de baja -->
{% block btn-modificar %}{% endblock %}

{% block more-buttons %}
    <a id="btn-ver" class="btn btn-info hidden" href="#" >
        <span class="glyphicon glyphicon-eye-open"></span> Ver
    </a>

{% endblock %}

{%block filtro %}
    <label for="clinica" >Buscar:</label>
    <input  id="clinica" name="clinica" value="{{filtros.clinica}}" placeholder="Clinica">
    <input class="datepicker"  id="desde" name="desde" value="{{filtros.desde}}" placeholder="Desde">
    <input class="datepicker" id="hasta" name="hasta" value="{{filtros.hasta}}" placeholder="Hasta">
    <button class="btn btn-danger btn-sm" type="submit" value="Filtrar" id="btn-filtrar">Filtrar</button>
    <button class="btn btn-primary btn-sm" type="button"  id="btn-limpiar">Limpiar</button>
{% endblock %}

{% block grid %}
    <table class="table table-bordered">
        <thead>
            <tr class="info">
                <th>NÂº Pedido</th>
                <th>Clinica</th>
                <th>Fecha</th>
                <th>Obra Social</th>
                <th>Medico Auditor</th>
            </tr>
        </thead>
        <tbody>
            {% for pedido in pedidos %}
                <tr class="clickeable" data-id="{{ pedido.nroPedido }}">
                    <td>{{ pedido.nroPedido }}</td>
                    <td>{{ pedido.clinica }}</td>
                    <td>{{ pedido.fecha }}</td>
                    <td>{{ pedido.obraSocial}}</td>
                    <td>{{ pedido.medicoAuditor }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block cantidad-elementos %}

    {{ pedidos|length }}
    {% if pedidos|length != 1 %}
        pedidos de clinica
    {% else %}
        pedido de clinica
    {% endif %}

{% endblock %}

{% block more-scripts %}
    <script>
        (function(){

            $("#btn-ver").click(function(e){
                id = get_selected_row()
                if(id){
                    $(this).attr("href", "/pedidosDeClinica/ver/" + id + "/");
                }

                e.stopPropagation();
            });

            $(".datepicker").datepicker({
                changeDay: true,
                changeMonth: true,
                changeYear: true,
                yearRange: "1990:2030",
            });

            $("#btn-limpiar").click(function(e){
                $("form input").val("");
                e.stopPropagation();
            });

        })();
    </script>
{% endblock %}
