{% extends "base/base-abm.html"%}
{% load staticfiles %}

{% block title %}Pedidos de Clinica{% endblock %}

{% block more-stylesheets %}
     <link rel="stylesheet" href="{%  static 'css/jquery-ui.custom.min.css'  %}">
{% endblock %}

{% block more-crumbs %}
    <li class="active">Pedidos de clinica</li>
{% endblock %}

{% block panel-title-ABM %}Pedidos de Clinica{% endblock %}

{% block url-add %}{% url 'pedidoDeClinica_add' %}{% endblock %}

{% block btn-baja %}{% endblock %}

{% block btn-modificar %}{% endblock %}

{% block more-buttons %}
    <a id="btn-ver" class="btn btn-info hidden ocultable" href="#">
        <span class="glyphicon glyphicon-eye-open"></span> Ver
    </a>
{% endblock %}

{%block filtro %}
    <label for="clinica" >Buscar:</label>
    <input  id="clinica" name="clinica" value="{{filtros.clinica}}" placeholder=" Clinica">
    <input class="datepicker"  id="desde" name="desde" value="{{filtros.desde}}" placeholder=" Desde">
    <input class="datepicker" id="hasta" name="hasta" value="{{filtros.hasta}}" placeholder=" Hasta">
    <button class="btn btn-danger btn-sm" type="submit" value="Filtrar" id="btn-filtrar">Filtrar</button>
    <button class="btn btn-primary btn-sm" type="button"  id="btn-limpiar">Limpiar</button>
{% endblock %}

{% block grid %}
    <table class="table table-bordered">
        <thead>
            <tr class="info">
                <th>NÂº Pedido</th>
                <th>Clinica</th>
                <th>Fecha</th>
                <th>Obra social</th>
                <th>Medico auditor</th>
            </tr>
        </thead>
        <tbody>
            {% for pedido in pedidos %}
                <tr class="clickeable" data-id="{{ pedido.nroPedido }}">
                    <td>{{ pedido.nroPedido }}</td>
                    <td>{{ pedido.clinica }}</td>
                    <td>{{ pedido.fecha }}</td>
                    <td>{{ pedido.obraSocial}}</td>
                    <td>{{ pedido.medicoAuditor }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block cantidad-elementos %}
    {{ pedidos|length }}
    {% if pedidos|length != 1 %}
        pedidos de clinica
    {% else %}
        pedido de clinica
    {% endif %}
{% endblock %}

{% block more-scripts %}
    <script src="{% static 'js/datepicker.js' %}"></script>
    <script>
        (function(){
            $("#btn-ver").on("click", function(e){
                id = get_selected_row()
                if(id){
                    $(this).attr("href", "/pedidosDeClinica/ver/" + id + "/");
                }

                e.stopPropagation();
            });

            $("#btn-limpiar").on("click", function(e){
                $("form input").val("");
                e.stopPropagation();
            });
        })();
    </script>
{% endblock %}
