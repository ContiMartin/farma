{% extends "base.html" %}
{% load staticfiles %}
{% load bootstrap3 %}

{% block stylesheets %}
	<link rel="stylesheet" href="{% static 'css/organizaciones.css' %}">
{% endblock %}

{% block title %}
{% endblock %}

{% block content %}
    {{ form.errors }}
    {{ form.non_field_errors }}

    <div class="container-fluid panel-grid">
        <div class="col-xs-12">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="pull-left">
                        {% block panel-title-organizacion %}
                        {% endblock %}
                    </div>
                    <button class="btn btn-danger btn-xs pull-right hidden" id="baja" type="button" data-toggle="modal" data-target="#modal-baja"><span class="glyphicon glyphicon-minus"></span>  Baja</button>
                    <button class="btn btn-warning btn-xs pull-right hidden" id="modificar" type="button" data-toggle="modal" data-target="#modal-modificacion"><span class="glyphicon glyphicon-cog"></span>  Modificaci√≥n</button>
                    <button class="btn btn-success btn-xs pull-right" type="button" data-toggle="modal" data-target="#modal-alta"><span class="glyphicon glyphicon-plus"></span>  Alta</button>
                    <div class="clearfix"></div>
                </div>
                <div class="panel-body">
                    <form method="GET" class="form-inline pull-right">
                        <div class="form-group">
                            <label for="razonSocial" >Buscar:</label>
                            <input class="filtro" id="razonSocial" name="razonSocial" value="{{filtros.razonSocial}}" placeholder=" Razon Social">
                        </div>
                    </form>
                    {% block grid %}
                    {% endblock %}
                </div>
            </div>
        </div>
    </div>

    {% block modal-alta %}
    <!-- Modal modal-alta -->
    <div class="modal fade" id="modal-alta" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    {% block modal-alta-title %}{% endblock %}
                </div>
                <div class="modal-body">
                    {% block modal-alta-body %}{% endblock %}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </div>
            <!-- modal-content -->
        </div>
        <!-- end modal-dialog -->
    </div>
    <!-- end modal ...-->
    {% endblock %}

    {% block modal-modificacion %}
    {% endblock %}

    {% block modal-baja %}
    {% endblock %}

{% endblock %}

{% block scripts %}
    <script src="{% static 'js/utils.js' %}"></script>

    <script>
        $(".filtro").change(function(e) {
            $(this).closest("form").submit();
        });

        $(".clickeable").click(function(e) {
            select_row_table(this);
            hidden_show(["#modificar", "#baja"], false);
            e.stopPropagation();
        });

        $(document).keyup(function(e){
            if(e.keyCode == 27){
                $("tr").removeClass("active");
                hidden_show(["#modificar", "#baja"], true);
            }
        });

        $(document).on("click", function(e){
            $("tr").removeClass("active");
            hidden_show(["#modificar", "#baja"], true);
            console.log("click en documento");
        });
    </script>
{% endblock %}