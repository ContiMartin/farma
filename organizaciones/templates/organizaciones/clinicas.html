{% extends "base.html" %}
{% load staticfiles %}
{% load bootstrap3 %}

{% block content %}

<form method="GET" class="form-inline pull-right">
    <div class="form-group">
        <label for="razonSocial" >Buscar:</label>
        <input class="filtro" id="razonSocial" name="razonSocial" value="{{filtros.razonSocial}}" placeholder="Razon Social">
    </div>
</form>

<button class="btn btn-success" type="button" data-toggle="modal" data-target="#add-clinica"><span class="glyphicon glyphicon-plus"></span>  Alta</button>
<button class="btn btn-danger" type="button"><span class="glyphicon glyphicon-minus"></span>  Baja</button>
<button class="btn btn-primary" type="button"><span class="glyphicon glyphicon-cog"></span>  Modificación</button>

<table id="example" class="table table-hover table-bordered" cellspacing="0" width="100%">

    <thead>
        <tr>

        <th>Razon Social </th>
        <th>Dirección</th>
        <th>Mail</th>
        <th>Localidad</th>
        <th>Obra Social</th>
        <th>Teléfono</th>
        <th>Cuit</th>

        </tr>
    </thead>

    <tbody>
        {% for clinica in clinicas %}

            <tr class="clickeable" data-id="{{ clinicas.id }}">
            <td>{{clinica.razonSocial}}</td>
            <td>{{clinica.direccion}}</td>
            <td>{{clinica.mail}}</td>
            <td>{{clinica.localidad}}</td>
            <td>{{clinica.obraSocial}}</td>
            <td>{{clinica.telefono}}</td>
            <td>{{clinica.cuit}}</td>
            </tr>

        {% endfor %}
    </tbody>

</table>

{% block modals-add-clinica %}
    <!-- Modal add-clinica -->
    <div class="modal fade" id="add-clinica" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Agregar Clínica</h4>
                </div>
                <div class="modal-body">
                    {% block modal-body-add-detalle %}
                        <form class="form-horizontal">
                            <div class="form-group">
                                <label class="control-label col-sm-offset-1 col-sm-2" for="razon">Razon Social:</label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="razon" type="text" name="razon" placeholder="Razón Social" autofocus required />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-offset-1 col-sm-2" for="cuit">Cuit:</label>
                                <div class="col-sm-7">
                                    <input class="form-control"id="cuit" type="text" name="cuit" placeholder="Cuit" required />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-offset-1 col-sm-2" for="direccion">Dirección:</label>
                                <div class="col-sm-7">
                                    <input class="form-control"id="direccion" type="text" name="direccion" placeholder="Dirección" required />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-offset-1 col-sm-2" for="localidad">Localidad:</label>
                                <div class="col-sm-7">
                                    <input class="form-control"id="localidad "type="text" name="localidad" placeholder="Localidad" required />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-offset-1 col-sm-2" for="obraSocial">Obra Social:</label>
                                <div class="col-sm-7">
                                    <input class="form-control"id="obraSocial" type="text" name="obraSocial" placeholder="Obra Social" />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-offset-1 col-sm-2" for="telefono">Teléfono:</label>
                                <div class="col-sm-7">
                                    <input class="form-control"id="tel" type="tel" name="tel" placeholder="Teléfono" />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-offset-1 col-sm-2" for="email">Email:</label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="email" type="email" name="email" placeholder="Email" />
                                </div>
                            </div>
                        </form>
                    {% endblock %}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </div><!-- modal-content -->
        </div><!-- end modal-dialog -->
    </div><!-- end modal ...-->
    <!-- end modal add-detalle -->
{% endblock %}

{% endblock %}

{% block scripts %}

<script>
    $(".filtro").change(function(e) {
        $(this).closest("form").submit();
    });
    $(".clickeable").click(function(e) {
        var t = $(this).closest("table");
        $("tr", t).removeClass("active");
        $(this).addClass("active");
        var m = $(this).data("id");
        console.log(m);
    });
</script>

{% endblock %}