{% extends "base/base.html" %}
{% load staticfiles %}
{% load staticfiles bootstrap3 %}
{% load staticfiles bootstrap_dynamic_formsets %}

{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{%  static 'css/jquery-ui.custom.min.css' %}">
    <link rel="stylesheet" href="{%  static 'css/base.css' %}">

    {{ dosis_formset.media.css }}
	<script src="{% static 'js/jquery.min.js' %}"></script>
	<script src="{% static 'js/jquery-ui.min.js' %}"></script>
	{{ dosis_formset.media.js }}

    <link rel="stylesheet" href="{%  static 'css/selectize.css' %}">
    <link rel="stylesheet" href="{%  static 'css/selectize.bootstrap3.css' %}">

    <style>
        .errorlist {
            color : #A94442;
            list-style:none;
            font-weight: 700;
        }

        .pre-scrollable {
            max-height: 470px;
        }
    </style>
{% endblock %}

{% block title %}
	Alta de Medicamento
{% endblock %}

{% block content %}
    {% block breadcrumbs %}
        <ol id="breadcrumb-page" class="breadcrumb _breadcrumb_">
            <li><a href="{% url 'inicio' %}">Inicio</a></li>
            <li><a href="{% url 'medicamentos' %}">Medicamentos</a></li>
            <li class="active">Alta</li>
        </ol>
    {% endblock %}
    <div style="margin: 30px 20px 90px 20px;">
        <div class="container">
            <div class="col-xs-12 col-md-12">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h3 class="panel-title">Alta de Medicamentos</h3>
                    </div>
                    <div class="panel-body">
                        {{ medicamento_form.errors }}
                        {{ medicamento_form.non_field_errors }}
                        <form class="form-horizontal col-xs-12 col-md-12" method="post">
                            <div class="row">
                                <div class="meds col-xs-6 col-md-6" style="margin: 0 35px 18px 30px;">
                                    {% csrf_token %}
                                    {% bootstrap_form medicamento_form %}
                                </div>
                                <div class="pre-scrollable col-xs-5 col-md-5">
                                    <label class="control-label">Formula</label>
                                    {{ dosis_formset.non_form_errors }}
                                    {% bootstrap_dynamic_formset dosis_formset can_order=True can_delete=True layout='inline'  %}
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="pull-right">
                    <button type="submit" id="btn-guardar-continuar" class="btn btn-success pull-right" style="margin-left:10px;" value="_continuar" name="_continuar">
                        {% bootstrap_icon "ok" %} Guardar y Continuar
                    </button>
                    <button type="submit" id="btn-guardar-volver" class="btn btn-primary pull-right" value="_volver" name="_volver">
                        {% bootstrap_icon "ok" %} Guardar y Volver
                    </button>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script type="text/javascript" src="{%  static 'js/selectize.js' %}"></script>
    <script>
        $('.meds select').selectize({
            sortField: {
                field: 'text',
                direction: 'asc'
            },
            dropdownParent: 'body'
        });

        $(document).on("keyup", function(e){
            if(e.keyCode == 112){
                var url = "{% static 'documentacion/build/html/medicams.html' %}";
                url += "#alta-de-medicamento";
                window.open(url);
            }
        });
    </script>
{% endblock %}